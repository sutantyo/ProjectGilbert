'use strict';
var fs = require('fs');

// Specifying encoding causes read method to return strings instead of Buffers.
// rs is a stream.Readable.
var rs = fs.createReadStream('./story.txt', {encoding: 'utf8'});

rs.on('readable', function () {
  while (true) {
    var chunk = rs.read(20);
    if (!chunk) return;
    //console.log(chunk.toString());
    console.log(chunk);
  }
});

rs.on('close', function () {
  console.log('got close');
});

rs.on('end', function () {
  console.log('got end');
});

rs.on('error', function (err) {
  console.log('err =', err);
});
